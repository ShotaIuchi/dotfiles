# Emacs キーバインド

この設定で使えるキーバインドの一覧。`which-key` を有効にしているため、プレフィックスキーを押して待つと候補が表示される。

## プレフィックスキー一覧

| プレフィックス | 用途 | 例 |
|---|---|---|
| `C-x` | グローバル操作（ファイル、バッファ、ウィンドウ） | `C-x C-s` 保存 |
| `M-x` | コマンド実行 | - |
| `C-c` | モード固有 / ユーザー定義 | `C-c t` ターミナル |
| `M-s` | 検索 | `M-s r` ripgrep |
| `M-g` | 移動（goto） | `M-g g` 行番号指定ジャンプ |
| `C-x p` | プロジェクト操作 | `C-x p f` プロジェクト内ファイル検索 |
| `C-x r` | レジスタ / 矩形選択 | `C-x r t` 矩形置換 |
| `C-x t` | タブ操作 | `C-x t 2` 新タブ |
| `C-x v` | バージョン管理（vc） | `C-x v l` ログ表示 |

## カスタムキーバインド

### 基本操作

| キー | 機能 | 備考 |
|---|---|---|
| `C-h` | Backspace | デフォルトのヘルプは `C-?` に移動 |
| `C-?` | ヘルプ | - |
| `M-n` | ページ下スクロール | - |
| `M-p` | ページ上スクロール | - |

### 検索 (`M-s`)

| キー | 機能 | パッケージ |
|---|---|---|
| `C-s` | バッファ内行検索 | consult |
| `M-s r` | プロジェクト横断grep | consult (ripgrep) |
| `M-s f` | ファイル名検索 | consult (find) |

### 移動 (`M-g`)

| キー | 機能 | パッケージ |
|---|---|---|
| `M-g g` | 行番号ジャンプ | consult |
| `M-g M-g` | 行番号ジャンプ | consult |
| `M-g n` | 次のエラーへ | flymake |
| `M-g p` | 前のエラーへ | flymake |

### ナビゲーション

| キー | 機能 | パッケージ |
|---|---|---|
| `M-j` | 画面内の任意位置にジャンプ | avy |

### バッファ / ファイル (`C-x`)

| キー | 機能 | パッケージ |
|---|---|---|
| `C-x b` | バッファ切替 | consult |
| `C-x C-r` | 最近開いたファイル | consult |
| `C-x g` | Git status | magit |
| `C-x u` | Undoツリー表示 | vundo |
| `C-x 6` | フローティングターミナル切替 | multi-vterm |

### プロジェクト (`C-x p`)

| キー | 機能 | パッケージ |
|---|---|---|
| `C-x p f` | プロジェクト内ファイル検索 | project (built-in) |
| `C-x p g` | プロジェクト内grep | project (built-in) |
| `C-x p b` | プロジェクト内バッファ切替 | project (built-in) |
| `C-x p p` | プロジェクト切替 | project (built-in) |
| `C-x p d` | プロジェクトのdired | project (built-in) |
| `C-x p e` | プロジェクトのeshell | project (built-in) |

### 編集

| キー | 機能 | パッケージ |
|---|---|---|
| `C-=` | 選択範囲を段階的に拡大 | expand-region |
| `C-.` | 候補にアクションを実行 | embark |
| `C-;` | 候補にデフォルトアクションを実行 | embark |

### ターミナル (`C-c` / vterm内)

| キー | 機能 | 備考 |
|---|---|---|
| `C-c t` | 新しいターミナルを開く | multi-vterm |
| `C-x 2` | 下に分割してターミナル | vterm内のみ |
| `C-x 3` | 右に分割してターミナル | vterm内のみ |
| `C-x 0` | ターミナルを閉じる | vterm内のみ |
| `C-x 6` | フローティングターミナル切替 | ポップアップ表示 |

## 便利なワークフロー

### プロジェクト横断一括置換

1. `M-s r` でripgrepで検索
2. `C-.` → `E` で検索結果をgrepバッファにexport
3. `C-c C-p` でwgrepモード（編集可能にする）
4. 置換を行い `C-c C-c` で保存

### コード内ジャンプ

1. `M-j` を押して移動先の文字を入力
2. 表示されるヒント文字を入力してジャンプ
