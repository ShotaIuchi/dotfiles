# ==============================================================================
# Common Shell Configuration
# ==============================================================================
# bash/zsh共通設定。各シェルのrcファイルからsourceする。

# ------------------------------------------------------------------------------
# Environment Variables
# ------------------------------------------------------------------------------

export EDITOR="nvim"
export LANG="en_US.UTF-8"

# Claude Code: disable terminal title override (use shell's title instead)
export CLAUDE_CODE_DISABLE_TERMINAL_TITLE=1

# ------------------------------------------------------------------------------
# Path
# ------------------------------------------------------------------------------

# Homebrew
if [[ -d "/opt/homebrew/bin" ]]; then
    export PATH="/opt/homebrew/bin:$PATH"
fi

# Local bin
if [[ -d "$HOME/.local/bin" ]]; then
    export PATH="$HOME/.local/bin:$PATH"
fi

# ------------------------------------------------------------------------------
# Aliases
# ------------------------------------------------------------------------------

# ls
alias ll='ls -la'
alias la='ls -A'
alias l='ls -CF'

# Safety
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Navigation
alias ..='cd ..'
alias ...='cd ../..'

# Editor (Neovim)
alias vi='nvim'
alias vim='nvim'

# Git
alias g='git'
alias gs='git status'
alias gd='git diff'
alias gl='git log --oneline -10'

# Claude Code
alias fclaude='claude --dangerously-skip-permissions'

# Markdown viewer
alias md='glow -p'

# ------------------------------------------------------------------------------
# Functions
# ------------------------------------------------------------------------------

# mkdir & cd
mkcd() {
    mkdir -p "$1" && cd "$1"
}

# ------------------------------------------------------------------------------
# Zellij Pane Title
# ------------------------------------------------------------------------------

# Get directory name for title (git root name or current dir name)
_zellij_title_dir() {
    local git_root
    git_root=$(git rev-parse --show-toplevel 2>/dev/null)
    if [[ -n "$git_root" ]]; then
        basename "$git_root"
    else
        basename "$PWD"
    fi
}

# Set Zellij pane title
_zellij_set_title() {
    local title="$1"
    printf '\e]0;%s\a' "$title"
}
